    <div class="chat-row row g-4 justify-content-center py-5">
        <div class="col-xl-3 col-lg-4 col-12 conversation_list" #sideNav>
            <div class="side-chat">
                <div class="card h-100">
                    <div class="card-header justify-content-between">
                        <p class="title text-center">المحادثات</p>
                        <button mat-icon-button class="toggler"
                            *ngIf="toggle" (click)="toggleSideMenu()">
                            <mat-icon>close</mat-icon>
                        </button>
                        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                            <mat-icon>more_vert</mat-icon>
                          </button>
                          <mat-menu #menu="matMenu">
                            <a mat-menu-item 
                                href="https://api.whatsapp.com/send?phone=966570000675&text=https://gooldendeal.com/" 
                                target="_blank"
                                style="text-align: end;">
                                <span class="px-2">واتساب</span> 
                                <img src="../../../assets/images/support_whats_icon.svg" alt="support_whats_icon">
                            </a>
                            <a mat-menu-item 
                                href="https://www.instagram.com/golden.deal1/" 
                                target="_blank"
                                style="text-align: end;">
                                <span class="px-2">انستجرام</span> 
                                <img src="../../assets/images/Instagram.svg" alt="instgram-icon">
                            </a>
                            <a mat-menu-item 
                                href="https://t.snapchat.com/CpWgDLQx" 
                                target="_blank"
                                style="text-align: end;">
                                <span class="px-2">سناب{{'\u00A0'}}شات</span> 
                                <img src="../../assets/images/Snapchat (1).svg" alt="Snapchat-icon">
                            </a>
                            <a 
                                mat-menu-item
                                (click)="toggleComponentVisibility()"
                                style="text-align: end;">
                                <span class="px-2">الدعم</span>
                                <img src="../../assets/images/support_chat_icon.svg" alt="avatar-img" width="36px" height="36px">
                            </a>
                        </mat-menu>
                    </div>
                    <mat-progress-bar mode="indeterminate"  *ngIf="loader" id="addprog"></mat-progress-bar>
                    <div class="card-body ps-container mt-2 ps-theme-default ps-active-y" 
                     style="overflow-y: scroll !important;height:505px !important;">
                        <ul ngbNav #nav="ngbNav"  #chatWindow [(activeId)]="activeId"
                            class="nav-pills p-0" orientation="vertical">
                            <ng-container *ngFor="let user of msgUsersList, let i=index;">
                                <li [ngbNavItem]="i">
                                    <a ngbNavLink (click)="getChat(user.sender === userId ? user.receiver : user.sender)" 
                                        [ngClass]="{'new_msg': user.receiver == userId && user.seen_at == 0}">
                                        <div class="column">
                                            <div class="chats">
                                                <div class="avatar">
                                                    <img src="{{user.sender === userId ? avatar_base_url+user.receiver_avatar : avatar_base_url+user.sender_avatar}}" alt="placeholderimg">
                                                </div>
                                                <div class="chat">
                                                    <p class="chat-name">{{user.sender === userId ? user.receiver_name : user.sender_name}}</p>
                                                    <p class="chat-desc"  *ngIf="user.type === 0">{{user.message}}</p>
                                                </div>
                                                <div *ngIf="user.receiver == userId && user.seen_at == 0">
                                                    <span matBadgeSize="small"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                  <ng-template ngbNavContent>
                                    <div class="page-content page-container" id="page-content" *ngIf="!isComponentVisible">
                                        <div class="card">
                                            <button mat-icon-button class="toggler"
                                                *ngIf="toggle" 
                                                (click)="toggleSideMenu()">
                                                <mat-icon>
                                                    menu
                                                </mat-icon>
                                            </button>
                                            <div class="card-header justify-content-center">
                                                <h4 class="card-title"><strong>{{user.sender === userId ? user.receiver_name : user.sender_name}}</strong></h4>
                                            </div>
                                            <mat-progress-bar mode="indeterminate"  *ngIf="load" id="addprog"></mat-progress-bar>
                                            <div class="ps-container ps-theme-default ps-active-y mt-2" id="chat-content">
                                                <div class="media media-chat" 
                                                    [ngClass]="{'media-chat-reverse' : msg.sender_id !== userId}"
                                                    *ngFor="let msg of usersMsg">
                                                    <div class="p-2 m-1 media-1 media-2">
                                                        <img class="avatar ms-2" src="{{avatar_base_url+msg.sender_avatar}}" alt="user_avatar" *ngIf="msg.sender_avatar !== ''">
                                                        <p class="msg-txt" *ngIf="msg.type === 0">{{msg.message}}</p>
                                                        <a [href]="msg.message" target="_blank" *ngIf="msg.type === 1">
                                                            <img 
                                                                class="msg-img" 
                                                                [src]="sanitizeUrl(msg.message)"
                                                                alt="product image" 
                                                                width="200px"
                                                                height="150px"
                                                            />
                                                        </a>
                                                        <a class="msg-file" [href]="msg.message" target="_blank" *ngIf="msg.type === 2">
                                                            <img
                                                                class="msg-img" 
                                                                src="../../assets/images/pdf-svgrepo-com.svg"
                                                                alt="product image" 
                                                                width="70px"
                                                                height="70px"
                                                            />
                                                        </a>
                                                        <div class="msg-ad" *ngIf="msg.type === 3">
                                                            <div [innerHTML]="parsing(msg.message)"></div>
                                                        </div>
                                                    </div>
                                            </div>
                                            <p class="text-danger text-center" *ngIf="errorTxt">{{errorTxt}}</p>
                                            <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 0px;">
                                                <div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div>
                                            </div>
                                            <div class="ps-scrollbar-y-rail" style="top: 0px; height: 0px; right: 2px;">
                                                <div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 2px;"></div>
                                            </div>
                                        </div>
                                        <form>
                                            <div class="publisher">
                                                <button class="btn text-info btn_bg bg_blue m-0" (click)="sendMsg(0)">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                                                        <path d="M0 13.0268H22.6047L12.185 2.60462L14.8837 0L29.7674 14.8837L14.8837 29.7674L12.2841 27.1678L22.6047 16.7406H0V13.0268Z" fill="white"/>
                                                    </svg>
                                                </button>
                                                <div class="outer" #textArea>
                                                    <div class="d-flex align-items-center" style="width: 100%;">
                                                        <textarea 
                                                            class="publisher-input form-control" 
                                                            type="text" 
                                                            placeholder="اكتب رسالتك هنا"
                                                            [(ngModel)]="messageTxt"
                                                            [ngModelOptions]="{standalone: true}"
                                                            (keyup)="$event.keyCode === 13">
                                                        </textarea>
                                                    </div>
                                                </div>
                                                <div class="btn-group dropup m-0">
                                                    <button 
                                                        type="button" 
                                                        class="p-0 m-0 btn_more" 
                                                        data-bs-toggle="dropdown" 
                                                        aria-expanded="false">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                                                            <path d="M29.004 17.5934L20.0096 27.0779C19.8577 27.2326 19.7365 27.4176 19.6532 27.6221C19.5698 27.8267 19.526 28.0467 19.5241 28.2693C19.5223 28.4919 19.5625 28.7127 19.6425 28.9187C19.7225 29.1248 19.8405 29.312 19.9899 29.4694C20.1392 29.6268 20.3167 29.7513 20.5122 29.8356C20.7076 29.9199 20.917 29.9623 21.1281 29.9604C21.3393 29.9585 21.548 29.9122 21.742 29.8243C21.936 29.7365 22.1115 29.6087 22.2582 29.4486L31.2542 19.9658C32.1489 19.0225 32.6516 17.743 32.6516 16.4089C32.6516 15.0748 32.1489 13.7954 31.2542 12.852C30.3594 11.9087 29.1459 11.3787 27.8805 11.3787C26.6151 11.3787 25.4015 11.9087 24.5068 12.852L15.5108 22.3365C14.7571 23.1113 14.1569 24.0362 13.7449 25.0574C13.3329 26.0787 13.1174 27.1761 13.1108 28.2859C13.1042 29.3956 13.3067 30.4958 13.7065 31.5224C14.1063 32.549 14.6955 33.4818 15.4399 34.2665C16.1843 35.0511 17.069 35.6722 18.0428 36.0936C19.0167 36.515 20.0601 36.7283 21.1128 36.7212C22.1654 36.7141 23.2062 36.4867 24.1748 36.0522C25.1434 35.6177 26.0206 34.9847 26.7554 34.19L35.7514 24.7072L38 27.0779L29.004 36.5624C26.9163 38.7635 24.0847 40 21.1323 40C18.1798 40 15.3483 38.7635 13.2606 36.5624C11.1729 34.3613 10 31.376 10 28.2633C10 25.1505 11.1729 22.1652 13.2606 19.9641L22.2582 10.4813C22.9953 9.6973 23.8721 9.07451 24.8382 8.64869C25.8043 8.22288 26.8406 8.00244 27.8877 8.00002C28.9348 7.9976 29.972 8.21326 30.9399 8.63461C31.9077 9.05596 32.7871 9.6747 33.5275 10.4553C34.2679 11.2359 34.8548 12.163 35.2544 13.1834C35.6541 14.2038 35.8586 15.2974 35.8563 16.4013C35.854 17.5053 35.6449 18.5979 35.241 19.6164C34.8372 20.6349 34.2464 21.5593 33.5028 22.3365L24.5068 31.8227C23.6118 32.766 22.398 33.2959 21.1325 33.2957C19.867 33.2956 18.6533 32.7654 17.7586 31.8218C16.8638 30.8783 16.3612 29.5986 16.3614 28.2643C16.3615 26.9301 16.8644 25.6506 17.7594 24.7072L26.7554 15.2227L29.004 17.5934Z" fill="#FA9C44"/>
                                                        </svg>
                                                    </button>
                                                    <ul class="dropdown-menu">
                                                        <li class="me-2">
                                                            <a class="btn_bg bg_lightGreen" href="https://www.google.com/maps" target="_blank">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 20 24" fill="none">
                                                                    <path d="M9.99952 24L2.92536 16.9723C1.05169 15.1039 0 12.5765 0 9.9421C0 7.30766 1.05169 4.78027 2.92536 2.91194C3.85326 1.98896 4.95583 1.25662 6.16986 0.75692C7.38388 0.257223 8.68548 0 10 0C11.3145 0 12.6161 0.257223 13.8301 0.75692C15.0442 1.25662 16.1467 1.98896 17.0746 2.91194C18.9483 4.78027 20 7.30766 20 9.9421C20 12.5765 18.9483 15.1039 17.0746 16.9723L9.99952 24ZM9.99952 4.41761C8.89688 4.41476 7.81817 4.73627 6.89997 5.34145C5.98177 5.94663 5.26536 6.80827 4.84145 7.81727C4.41753 8.82628 4.30517 9.93728 4.51859 11.0096C4.732 12.082 5.2616 13.0674 6.04033 13.8412C6.81907 14.6151 7.81192 15.1424 8.89318 15.3566C9.97445 15.5708 11.0955 15.4621 12.1144 15.0444C13.1334 14.6266 14.0044 13.9186 14.6171 13.0099C15.2299 12.1012 15.5569 11.0327 15.5567 9.93969C15.5564 8.47755 14.9713 7.07518 13.9296 6.04003C12.8878 5.00488 11.4745 4.42144 9.99952 4.41761Z" fill="white"/>
                                                                </svg>
                                                            </a>
                                                            <span>الموقع</span>
                                                        </li>
                                                        <li class="me-2">
                                                            <a class="btn_bg bg_lightBirple" (click)="openPdfDialog()">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 16 24" fill="none">
                                                                    <path d="M10.95 5.94012H15.7362C15.7708 5.94041 15.8051 5.93286 15.8371 5.91791C15.8691 5.90295 15.8982 5.8809 15.9226 5.85302C15.9471 5.82515 15.9664 5.79201 15.9795 5.75554C15.9927 5.71906 15.9993 5.67998 15.999 5.64056C16 5.37821 15.95 5.11889 15.8525 4.88122C15.755 4.64355 15.6126 4.43344 15.4354 4.26601L11.4235 0.449496C11.1188 0.161145 10.735 0.00384007 10.339 0.00501138C10.2877 0.00486874 10.2369 0.0162683 10.1896 0.0385552C10.1422 0.0608421 10.0992 0.0935772 10.0629 0.13488C10.0267 0.176182 9.99796 0.225239 9.97841 0.27923C9.95885 0.333222 9.94885 0.391085 9.94898 0.449496V4.80025C9.94898 4.95003 9.97488 5.09835 10.0252 5.23671C10.0755 5.37508 10.1493 5.50078 10.2422 5.60665C10.3352 5.71251 10.4456 5.79645 10.567 5.85367C10.6885 5.91089 10.8186 5.94027 10.95 5.94012Z" fill="white"/>
                                                                    <path d="M8.58072 4.79957V0H1.68426C1.23803 0.00171051 0.810502 0.204504 0.494966 0.564131C0.179431 0.923757 0.00150079 1.41102 0 1.91961V22.0804C0.00150079 22.589 0.179431 23.0762 0.494966 23.4359C0.810502 23.7955 1.23803 23.9983 1.68426 24H14.3157C14.762 23.9983 15.1895 23.7955 15.505 23.4359C15.8206 23.0762 15.9985 22.589 16 22.0804V7.5H10.9501C10.3219 7.49914 9.71969 7.21436 9.27551 6.70811C8.83134 6.20187 8.58147 5.5155 8.58072 4.79957Z" fill="white"/>
                                                                </svg>
                                                            </a>
                                                            <span>المستندات</span>
                                                        </li>
                                                        <li class="me-2">
                                                            <a class="btn_bg bg_lightRed" (click)="openGalleryDialog()">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                    <path d="M24 21.3332V2.66679C23.998 1.96013 23.7164 1.28298 23.2167 0.78329C22.717 0.283603 22.0399 0.00199744 21.3332 0H2.66679C1.96013 0.00199744 1.28298 0.283603 0.78329 0.78329C0.283603 1.28298 0.00199744 1.96013 0 2.66679V21.3332C0.00199744 22.0399 0.283603 22.717 0.78329 23.2167C1.28298 23.7164 1.96013 23.998 2.66679 24H21.3332C22.0399 23.998 22.717 23.7164 23.2167 23.2167C23.7164 22.717 23.998 22.0399 24 21.3332ZM7.33312 14.0001L10.6661 18.0132L15.3335 12.0038L21.3332 20.0063H2.66679L7.33312 14.0001Z" fill="white"/>
                                                                </svg>
                                                            </a>
                                                            <span>معرض الصور</span>
                                                        </li>
                                                        <li class="me-2">
                                                            <a class="btn_bg bg_lightBlue" (click)="openCameraDialog()">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="24" viewBox="0 0 28 24" fill="none">
                                                                    <path d="M17.8749 13.5015C17.8749 14.2803 17.6439 15.0416 17.2113 15.6891C16.7786 16.3366 16.1637 16.8413 15.4442 17.1393C14.7248 17.4373 13.9331 17.5153 13.1693 17.3633C12.4055 17.2114 11.7039 16.8364 11.1532 16.2857C10.6026 15.7351 10.2276 15.0335 10.0757 14.2697C9.92373 13.5059 10.0017 12.7142 10.2997 11.9947C10.5977 11.2753 11.1024 10.6603 11.7499 10.2277C12.3974 9.79501 13.1587 9.56409 13.9374 9.56409C14.9817 9.56409 15.9832 9.97893 16.7216 10.7173C17.46 11.4558 17.8749 12.4573 17.8749 13.5015Z" fill="white"/>
                                                                    <path d="M25.4998 1.99955H20.0008L18.0056 0H10.0031L8.00031 1.99955H2.50023C1.83713 1.99955 1.20119 2.26297 0.732301 2.73186C0.263416 3.20074 0 3.83669 0 4.4998V21.4998C0 22.1629 0.263416 22.7988 0.732301 23.2677C1.20119 23.7366 1.83713 24 2.50023 24H25.4998C26.1629 24 26.7988 23.7366 27.2677 23.2677C27.7366 22.7988 28 22.1629 28 21.4998V4.4998C28 3.83669 27.7366 3.20074 27.2677 2.73186C26.7988 2.26297 26.1629 1.99955 25.4998 1.99955ZM14.0043 20.5005C12.6199 20.5005 11.2665 20.09 10.1153 19.3208C8.96419 18.5516 8.06698 17.4584 7.53717 16.1793C7.00735 14.9002 6.86873 13.4927 7.13883 12.1348C7.40892 10.777 8.07561 9.52967 9.05458 8.55069C10.0335 7.57172 11.2808 6.90503 12.6387 6.63493C13.9966 6.36483 15.404 6.50346 16.6831 7.03328C17.9622 7.56309 19.0554 8.46031 19.8246 9.61146C20.5938 10.7626 21.0043 12.116 21.0043 13.5005C21.0043 15.357 20.2668 17.1375 18.9541 18.4503C17.6413 19.763 15.8608 20.5005 14.0043 20.5005Z" fill="white"/>
                                                                </svg>
                                                            </a>
                                                            <span>الكاميرا</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    </div>
                                    <app-chat-support *ngIf="isComponentVisible"></app-chat-support>
                                  </ng-template>
                                </li>
                            </ng-container>
                            <p class="text-center text-danger" *ngIf="errorlist">{{errorlist}}</p>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9 col-lg-8 col-12" [ngbNavOutlet]="nav"></div>
    </div>
<div class="backDrop" #backDrop (click)="toggleSideMenu()"></div>