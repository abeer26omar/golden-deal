<div class="add-content mt-5 mb-5">
    <div class="card">
        <div class="card-header">
          <img class="imgCover" src="{{portfolio.data.cover_url ? portfolio.data.cover_url : '../../assets/images/coverPlaceholder.png'}}" alt="cover" >
        </div>
        <div class="card-body">
            <div class="user-profile">
                <div class="profile-img">
                    <img *ngIf="portfolio.data.image_url" src="{{portfolio.data.image_url}}" alt="profile">
                    <img *ngIf="!portfolio.data.image_url" src="../../assets/images/profilePlacholder.png" alt="profile">
                </div>
                <div class="row justify-content-center my-info">
                    <div class="user-data text-center col-sm-5 col-12 ">
                        <p class="user-name">{{portfolio.data.name}}</p>
                    </div>
                </div>
            </div>
            <div class="user-info p-1 p-sm-3">
                  <ul ngbNav #nav="ngbNav" class="nav-tabs">
                    <li [ngbNavItem]="2">
                      <a ngbNavLink>الاعلانات</a>
                      <ng-template ngbNavContent>
                        <div class="filter d-flex justify-content-between align-items-center pt-3">
                            <p class="all">الكل</p>
                            <a (click)="openFilterModal()">
                              <img src="../../assets/images/filter.svg" alt="filter" width="50px">
                            </a>
                        </div>
                        <p class="filter-result"><span class="ps-2">{{active_status}}</span></p>
                        <div class="products-row row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4 justify-content-start">
                            <div class="col" *ngFor="let product of products">
                              <div class="card h-100" *ngIf="product.category_slug !== 'car_plates'">
                                <div class="card-header text-center">
                                  <a (click)="productDetails(product.id)" [ngClass]="{'pe-none': product.status === 'sold' }">
                                    <img src="{{product.default_image ? product.default_image : '../../assets/images/placeholderimg.jpg'}}" alt="car" width="100%" height="200px !important">
                                  </a>
                                  <div class="favorite card_num p-2" *ngIf="product.status === 'active'">
                                    <a (click)="addToFav(product)">
                                      <span class="mb-0 ms-2" *ngIf="product.product_favorite_count > 0">{{product.product_favorite_count}}</span>
                                      <img src="../../assets/images/{{product.product_fav == false ? 'favorite_icon.svg' : 'already_fav_icon.svg'}}" alt="already_fav_icon" >
                                    </a>
                                  </div>
                                  <div class="favorite" *ngIf="product.status === 'sold'">
                                    <img src="../../assets/images/solid-flag.svg" alt="">
                                  </div>
                                </div>
                                <div class="card-body p-3">
                                  <div class="d-flex justify-content-between align-items-center pb-2">
                                      <a  (click)="productDetails(product.id)" [ngClass]="{'pe-none': product.status === 'sold' }">{{(product.name.length > 20)? (product.name | slice:0:20)+'..':(product.name)}}</a>
                                    <img src="../../assets/images/nego_icon.svg" alt="nego_icon" *ngIf="product.price == 0">
                                  </div>
                                  <div class="d-flex justify-content-between align-items-center pb-2">
                                    <p class="card_num" *ngIf="product.price !== 0">{{product.price}} ر.س</p>
                                    <p class="time"><img src="../../assets/images/clock.svg" alt="clock"><span>منذ {{product.created_since | dateAgo}}</span></p>
                                  </div>
                                  <div class="evaluation d-flex justify-content-between align-items-center">
                                    <p><img src="../../assets/images/location_icon (2).svg" alt="location_icon"> {{product.region_name == '' ? 'غير معروف': product.region_name}}</p>
                                  </div>
                                </div>
                              </div>
                              <div class="card h-100" *ngIf="product.category_slug == 'car_plates'">
                                <div class="card-header plates text-center" >
                                  <a (click)="productDetails(product.id)"
                                  [ngClass]="{'pe-none': product.status === 'sold' }" class="car_plates_container">
                                  <ng-container *ngFor="let property of product.properties">
                                          <ng-container *ngIf="property.slug_name == 'plate_type_filter_6'">
                                            <img class="car_plates" src="{{property.filter_value.filter_value == 'نقل' ?  '../../assets/images/carplate_nakl.svg' : '../../assets/images/car_paletes_details.svg'}}" alt="carplate_img">
                                          </ng-container>
                                  </ng-container>
                                  <table class="table">
                                    <tbody>
                                      <tr>
                                        <ng-container *ngFor="let property of product.properties">
                                          <ng-container *ngIf="property.type == 'text'">
                                              <td colspan="1" *ngIf="property.name_ar == 'حروف اللوحة عربي'"  class="separate_thin" [ngClass]="{'mac': mac}"></td>
                                              <td colspan="2" *ngIf="property.name_ar == 'حروف اللوحة عربي'">
                                                <span>{{property.filter_value.filter_value | input}}</span>
                                              </td>
                                              <td colspan="1" *ngIf="property.name_ar == 'ارقام اللوحة عربي'" class="separate_thick"></td>
                                              <td colspan="2" *ngIf="property.name_ar == 'ارقام اللوحة عربي'">
                                                <span>{{property.filter_value.filter_value | input}}</span>
                                              </td>
                                          </ng-container>
                                        </ng-container>
                                      </tr>
                                      <tr>
                                        <ng-container *ngFor="let property of product.properties">
                                          <ng-container *ngIf="property.type == 'text'">
                                            <!-- <ng-container *ngIf="property.name_ar == 'حروف اللوحة انجليزي' || property.name_ar == 'ارقام اللوحة انجليزي'">
                                              <td colspan="">{{property.filter_value.filter_value}}</td>
                                            </ng-container> -->
                                              <td colspan="1" *ngIf="property.name_ar == 'حروف اللوحة انجليزي'" class="separate_thin" [ngClass]="{'mac': mac}"></td>
                                              <td colspan="2" *ngIf="property.name_ar == 'حروف اللوحة انجليزي'">
                                                <span>{{property.filter_value.filter_value | input}}</span>
                                              </td>
                                              <td colspan="1" *ngIf="property.name_ar == 'ارقام اللوحة انجليزي'" class="separate_thick"></td>
                                              <td colspan="2" *ngIf="property.name_ar == 'ارقام اللوحة انجليزي'">
                                                <span class="lrt">{{property.filter_value.filter_value | input}}</span>
                                              </td>
                                          </ng-container>
                                        </ng-container>
                                      </tr>
                                    </tbody>
                                  </table>
                                  </a>
                                  <div class="favorite card_num p-2" *ngIf="product.status === 'active'">
                                    <a (click)="addToFav(product)">
                                      <span class="mb-0 ms-2" *ngIf="product.product_favorite_count > 0">{{product.product_favorite_count}}</span>
                                      <img src="../../assets/images/{{product.product_fav == false ? 'favorite_icon.svg' : 'already_fav_icon.svg'}}" alt="already_fav_icon" >
                                    </a>
                                  </div>
                                  <div class="favorite" *ngIf="product.status === 'sold'">
                                    <img src="../../assets/images/solid-flag.svg" alt="">
                                  </div>  
                                </div>
                                <div class="card-body p-3">
                                  <div class="d-flex justify-content-between align-items-center pb-2">
                                    <ng-container  *ngFor="let property of product.properties">
                                      <a (click)="productDetails(product.id)" 
                                      [ngClass]="{'pe-none': product.status === 'sold' }"
                                      *ngIf="property.slug_name == 'plate_type_filter_6'" 
                                      >{{property.filter_value.filter_value}}</a>
                                    </ng-container>
                                    <img src="../../assets/images/nego_icon.svg" alt="nego_icon" *ngIf="product.price == 0">
                                  </div>
                                  <div class="d-flex justify-content-between align-items-center pb-2">
                                    <p class="card_num" *ngIf="product.price !== 0">{{product.price}} ر.س</p>
                                    <p class="time"><img src="../../assets/images/clock.svg" alt="clock"><span>منذ {{product.created_since | dateAgo}}</span></p>
                                  </div>
                                  <div class="evaluation d-flex justify-content-between align-items-center">
                                    <p><img src="../../assets/images/location_icon (2).svg" alt="location_icon"> {{product.region_name == null ? 'غير معروف': product.region_name}}</p>
                                  </div>
                                </div>
                              </div>
                            </div>
                        </div>
                        <p class="none">{{errProducts}}</p>
                      </ng-template>
                    </li>
                  </ul>
                  <div [ngbNavOutlet]="nav" class="mt-2 px-1 px-sm-3"></div>
                  <p-paginator [rows]="meta.per_page" [totalRecords]="meta.total" 
                    [pageLinkSize]="3" (onPageChange)="paginate($event,meta.path)"></p-paginator>
            </div> 
        </div>
    </div>
</div>
<!-- filter modal -->
<div class="modal fade"
id="myModalFilter"
tabindex="-1"
aria-labelledby="exampleModalLabel"
aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content">
        <div class="modal-header justify-content-start">
          <div class="col-5">
              <button type="button" class="btn p-0" data-bs-dismiss="modal" aria-label="Close">
                <img src="../../assets/images/close.svg" alt="close">
              </button>
          </div>
          <h5 class="modal-title text-center" >اضافه فلتر</h5>
      </div>
        <mat-progress-bar mode="indeterminate" class="my-3" *ngIf="load" id="addprog"></mat-progress-bar>
        <!-- <p class="text-center" *ngIf="result">{{result}}</p> -->
        <div class="modal-body">
            <div class="sort py-2">
                <select class="form-select" 
                  aria-label="Default select example" (change)="onSelected($event)">
                    <option value="" selected disabled>حاله الاعلان</option>
                    <option value="sold">منتهية</option>
                    <option value="active">نشطه</option>
                </select>
            </div>
        </div>
      </div>
  </div>
</div>
<!-- faild  -->
<div id="faildAdds" 
class="modal fade"
tabindex="-1"
aria-labelledby="exampleModalLabel"
aria-hidden="true"
>
	<div class="modal-dialog modal-dialog-centered modal-sm">
		<div class="modal-content">
			<div class="modal-header justify-content-start">
        <div class="col-5">
            <button type="button" class="btn p-0" data-bs-dismiss="modal" aria-label="Close">
              <img src="../../assets/images/close.svg" alt="close">
            </button>
        </div>
    </div>
			<div class="modal-body text-center">
        <img src="../../assets/images/faild-mark.svg" alt="faild-mark" width="67px">
        <p class="py-3">{{error}}</p>
			</div>
		</div>
	</div>
</div>     
